# ffmpeg{#ffmpeg} 

## utilisation de FFmpeg
### ex: Transcoder un fichier video vers un fichier prores compatible avec quicktime
```
ffmpeg -i INPUT.mkv -c:v prores_ks -profile:v 3 -c:a pcm_s16le -pix_fmt yuv420p OUTPUT.mov
```

Où `-profile` est un chiffre entire de -1 to 5 correspondant au profile prores suivant :

* -1: auto (default)
* 0: proxy 45Mbps YUV 4:2:2
* 1: lt 102Mbps YUV 4:2:2
* 2: standard  147Mbps YUV 4:2:2
* 3: hq 220Mbps YUV 4:2:2
* 4: 4444 330Mbps YUVA 4:4:4:4
* 5: 4444xq  500Mbps YUVA 4:4:4:4

Où `-pix_fmt yuv420p` permet de créer un fichier compatible avec Quicktime


## FFplay

https://trac.ffmpeg.org/wiki/FancyFilteringExamples

### mandelbrot et analyse visuelle 
```bash
ffplay -f lavfi -i mandelbrot \
-vf "format=gbrp,split=4[a][b][c][d],\
[d]histogram=display_mode=0:level_height=244[dd],\
[a]waveform=m=1:d=0:r=0:c=7[aa],\
[b]waveform=m=0:d=0:r=0:c=7[bb],\
[c][aa]vstack[V],\
[bb][dd]vstack[V2],\
[V][V2]hstack"
```

### mandelbrot et historique de position de couleurs?

```bash
ffplay -f lavfi -i mandelbrot -vf \
"format=yuv444p,split=4[a][b][c][d],\
[a]waveform[aa],[b][aa]vstack[V],\
[c]waveform=m=0[cc],\
[d]vectorscope=color4[dd],\
[cc][dd]vstack[V2],[V][V2]hstack"
```

## ffmpeg grab gl
https://stackoverflow.com/questions/40689505/capturing-and-streaming-with-ffmpeg-while-displaying-locally
```
  ffmpeg -f x11grab [grab parameters] -i :0.0 \
    [transcode parameters] -f [transcode output] \
    -f opengl "Window title"
```